---
title: "Descripción de la línea de registro en diario general | Documentos de Microsoft"
description: "Este tema introduce cambios en la unidad de código 12, **Diario general-línea de registro**, que es el objeto principal de aplicación para el registro en contabilidad y es el único lugar donde insertar movimientos de contabilidad, de IVA, de clientes y de proveedores."
services: project-madeira
documentationcenter: 
author: SorenGP
ms.service: dynamics365-financials
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: design, general ledger, post
ms.date: 07/01/2017
ms.author: sgroespe
ms.translationtype: HT
ms.sourcegitcommit: 2c13559bb3dc44cdb61697f5135c5b931e34d2a8
ms.openlocfilehash: 77fa52505dc586dc11ca89e53f6eec75042d3606
ms.contentlocale: es-es
ms.lasthandoff: 12/14/2017

---
# <a name="general-journal-post-line-overview"></a><span data-ttu-id="ea033-103">Descripción de la línea de registro en diario general</span><span class="sxs-lookup"><span data-stu-id="ea033-103">General Journal Post Line Overview</span></span>
<span data-ttu-id="ea033-104">La unidad de código 12, **Diario general-lín. reg.**, es el objeto principal de aplicación para el registro en contabilidad y es el único lugar donde insertar movimientos de contabilidad, de IVA, de clientes y de proveedores.</span><span class="sxs-lookup"><span data-stu-id="ea033-104">Codeunit 12, **Gen. Jnl.-Post Line**, is the major application object for general ledger posting and is the only place to insert general ledger, VAT, and customer and vendor ledger entries.</span></span> <span data-ttu-id="ea033-105">Esta unidad de código se usa también para todas las operaciones de Liquidar, Desliquidar y Revertir.</span><span class="sxs-lookup"><span data-stu-id="ea033-105">This codeunit is also used for all Apply, Unapply and Reverse operations.</span></span>  
  
<span data-ttu-id="ea033-106">Mientras que la unidad de código se ha mejorado en cada versión durante los diez últimos años, su arquitectura seguía permaneciendo fundamentalmente invariable.</span><span class="sxs-lookup"><span data-stu-id="ea033-106">While the codeunit has been improved in each release over the last ten years, its architecture remained essentially unchanged.</span></span> <span data-ttu-id="ea033-107">La unidad de código llegó a ser muy grande, con aproximadamente 7600 líneas de código.</span><span class="sxs-lookup"><span data-stu-id="ea033-107">The codeunit became very large, with approximately 7,600 code lines.</span></span> <span data-ttu-id="ea033-108">Con esta versión de [!INCLUDE[d365fin](includes/d365fin_md.md)], se ha cambiado la arquitectura y la unidad de código se ha hecho más sencilla y más fácil de mantener.</span><span class="sxs-lookup"><span data-stu-id="ea033-108">With this release of [!INCLUDE[d365fin](includes/d365fin_md.md)], the architecture is changed and the codeunit has been made simpler and more maintainable.</span></span> <span data-ttu-id="ea033-109">Esta documentación introduce los cambios y proporciona información que necesitará para actualizar.</span><span class="sxs-lookup"><span data-stu-id="ea033-109">This documentation introduces the changes and provides information that you will need for upgrade.</span></span>  
  
## <a name="old-architecture"></a><span data-ttu-id="ea033-110">Arquitectura antigua</span><span class="sxs-lookup"><span data-stu-id="ea033-110">Old Architecture</span></span>  
<span data-ttu-id="ea033-111">La arquitectura antigua tenía las características siguientes:</span><span class="sxs-lookup"><span data-stu-id="ea033-111">The old architecture had the following features:</span></span>  
  
* <span data-ttu-id="ea033-112">Se hacía un uso extensivo de variables globales, lo que aumentaba la posibilidad de que se produjeran errores ocultos por el uso de variables con ámbito incorrecto.</span><span class="sxs-lookup"><span data-stu-id="ea033-112">There was extensive use of global variables, which increased the possibility of hidden errors due to use of variables with the wrong scope.</span></span>  
* <span data-ttu-id="ea033-113">Había muchos procedimientos largos (con más de 100 líneas de código) que también tenían una elevada complejidad ciclomática (es decir, muchas declaraciones anidadas CASE, REPEAT e IF ), que hacían el código muy complicado de leer y mantener.</span><span class="sxs-lookup"><span data-stu-id="ea033-113">There were many long procedures (with more than 100 code lines) that also had high cyclomatic complexity (that is, a lot of CASE, REPEAT, IF nested statements), which made the code very difficult to read and maintain.</span></span>  
* <span data-ttu-id="ea033-114">Varios procedimientos que solo se usaban localmente y solo debían usarse localmente no estaban marcados como locales.</span><span class="sxs-lookup"><span data-stu-id="ea033-114">Several procedures that were only used locally and were only meant to be used locally were not marked as local.</span></span>  
* <span data-ttu-id="ea033-115">La mayoría de los procedimientos no tenían parámetros y usaban variables globales.</span><span class="sxs-lookup"><span data-stu-id="ea033-115">Most procedures had no parameters and used global variables.</span></span> <span data-ttu-id="ea033-116">Algunos parámetros utilizados y variables globales reemplazadas con variables locales.</span><span class="sxs-lookup"><span data-stu-id="ea033-116">Some used parameters and overrode global variables with locals.</span></span>  
* <span data-ttu-id="ea033-117">Los patrones de código para buscar las cuentas de contabilidad y crear movimientos de contabilidad y de IVA no estaban estandardizados y variaban de un lugar a otro.</span><span class="sxs-lookup"><span data-stu-id="ea033-117">Code patterns for searching the general ledger accounts and creating general ledger and VAT entries was not standardized and varied from place to place.</span></span> <span data-ttu-id="ea033-118">Además, se producían muchas duplicaciones de código y corrupciones de simetría entre el código del cliente y el del proveedor.</span><span class="sxs-lookup"><span data-stu-id="ea033-118">In addition, there was a lot of code duplication and broken symmetry between customer and vendor code.</span></span>  
* <span data-ttu-id="ea033-119">Una gran parte del código en la unidad de código 12, aproximadamente el 30 por ciento, relacionado con los cálculos de descuento de pago y tolerancia, aunque estas características no se necesitan en muchos países o regiones.</span><span class="sxs-lookup"><span data-stu-id="ea033-119">A large part of the code in codeunit 12, approximately 30 percent, related to payment discount and tolerance calculations, although these features are not needed in many countries or regions.</span></span>  
* <span data-ttu-id="ea033-120">Las funciones de Registro, Liquidar, Desliquidar, Revertir, Descuento de pago y Tolerancia y Ajuste tipo cambio se incluían todas en la unidad de código 12 con una larga lista de variables globales.</span><span class="sxs-lookup"><span data-stu-id="ea033-120">Posting, Apply, Unapply, Reverse, Payment Discount and Tolerance, and Exchange Rate Adjustment were married together in codeunit 12 using a long list of global variables.</span></span>  
  
### <a name="new-architecture"></a><span data-ttu-id="ea033-121">Nueva arquitectura</span><span class="sxs-lookup"><span data-stu-id="ea033-121">New Architecture</span></span>  
<span data-ttu-id="ea033-122">En [!INCLUDE[d365fin](includes/d365fin_md.md)], la unidad de código 12 incluye las mejoras siguientes:</span><span class="sxs-lookup"><span data-stu-id="ea033-122">In [!INCLUDE[d365fin](includes/d365fin_md.md)], codeunit 12 has had the following improvements:</span></span>  
  
* <span data-ttu-id="ea033-123">La unidad de código 12 se ha refactorizado en procedimientos más pequeños (todos con menos de 100 líneas de código).</span><span class="sxs-lookup"><span data-stu-id="ea033-123">Codeunit 12 has been refactored into smaller procedures (all less than 100 code lines).</span></span>  
* <span data-ttu-id="ea033-124">Se han implementado patrones estandardizados para la búsqueda de cuentas de contabilidad mediante funciones de ayudante desde las tablas Grupo contable.</span><span class="sxs-lookup"><span data-stu-id="ea033-124">Standardized patterns for the search of general ledger accounts have been implemented by using helper functions from Posting Group tables.</span></span>  
* <span data-ttu-id="ea033-125">Se ha implementado un cuadro de motor de registro para gestionar el inicio y el fin de las transacciones y para aislar la creación en las entradas de IVA y de contabilidad, el cobro de ajustes de IVA y el cálculo de importes adicionales de divisa.</span><span class="sxs-lookup"><span data-stu-id="ea033-125">A Posting Engine Framework has been implemented to manage the start and finish of transactions and to isolate the creation to general ledger and VAT entries, the collection of VAT adjustment, and the calculation of additional currency amounts.</span></span>  
* <span data-ttu-id="ea033-126">Se ha eliminado la duplicación del código.</span><span class="sxs-lookup"><span data-stu-id="ea033-126">Code duplication has been eliminated.</span></span>  
* <span data-ttu-id="ea033-127">Muchas funciones de ayuda se han transferido a las tablas correspondientes de movimientos de cliente y de proveedor.</span><span class="sxs-lookup"><span data-stu-id="ea033-127">Many helper functions have been transferred to corresponding customer and vendor ledger entry tables.</span></span>  
* <span data-ttu-id="ea033-128">El uso de variables globales se ha minimizado, de modo que cada procedimiento utiliza parámetros y encapsula su propia lógica de aplicación.</span><span class="sxs-lookup"><span data-stu-id="ea033-128">The use of global variables has been minimized, so that each procedure uses parameters and encapsulates its own application logic.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ea033-129">Consulte también</span><span class="sxs-lookup"><span data-stu-id="ea033-129">See Also</span></span>  
<span data-ttu-id="ea033-130">[Detalles de diseño: estructura de interfaz de registro](design-details-posting-interface-structure.md) </span><span class="sxs-lookup"><span data-stu-id="ea033-130">[Design Details: Posting Interface Structure](design-details-posting-interface-structure.md) </span></span>  
[<span data-ttu-id="ea033-131">Detalles de diseño: estructura de motor de registro</span><span class="sxs-lookup"><span data-stu-id="ea033-131">Design Details: Posting Engine Structure</span></span>](design-details-posting-engine-structure.md)

